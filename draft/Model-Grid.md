
## モデルグリッドの基本的な構成

MIROCの大気モデルと海洋モデルは独立しており、異なる計算ノードで実行される。
大気モデルが実行されるノードを大気ノード、海洋モデルが実行されるノードを海洋ノードと呼ぶ。
大気ノード内ではサブモデルとして陸面モデル、海面モデル、河川モデルが実行される。大気海洋間の情報交換は大気ノードの海面モデルを通じて行われる．
海洋ノード内の海洋モデルの海面水温、海氷密接度などの情報は、大気ノード内でモデルの境界条件として扱えるように海面モデルのグリッドに変換される。
一方、大気ノードの海面モデルのグリッドで計算された熱・淡水・運動量フラックスは海洋モデルのグリッドに変換され、海洋ノードに送られる。
これらの一連のデータ通信、変換はエクスチェンジャーで行われる。
フラックスカップラーは境界条件や海面モデルや陸面モデルで計算した熱・淡水フラックスなどのデータを格納し必要に応じて、各モデルに振り分けている。
一般にフラックスカップラーはエクスチェンジャ―の機能も含むがこのドキュメントでは区別して記述する。

## モデルの水平グリッド

MIROCの水平グリッドは大気ノード内の各モデルにおいて、大気グリッド、陸面グリッド、河川グリッド、海面グリッドとして定義される．
大気ノード内の海面グリッドは海洋ノード内の海洋モデルの水平グリッドとは異なる。陸面グリッドおよび海面グリッドは大気モデルの水平グリッドを南北方向・東西方向に等分割したものであり、分割個数はそれぞれのグリッドで任意に設定可能である。
ただし海面グリッドの分割個数は陸面モデルの分割個数で割り切れる必要がある。
また、河川グリッドは大気グリッドと同じものもしくは等緯度経度間隔グリッドが使用可能である。海洋モデルの水平グリッドは水平一般曲線直交座標を採用しており、大気モデルと同じ座標系を扱う必要はない。
大気モデルと海洋モデルのデータの交換はあらかじめ大気モデルの海面グリッドと重複する海洋グリッドの場所、数、面積、ベクトルの回転などの情報を用意しておき、エクスチェンジャーにより行われる。

## 海陸分布の定義

MIROC内の海陸分布は海洋モデルによって定義された海陸分布が優先される。
海洋モデルの1グリッドは陸または海だけで定義されているが、大気モデルの陸面グリッド、海洋面グリッドは海洋モデルの海陸分布と整合がとれるように陸と海の割合が決定される。

$SA$ を大気グリッドの面積、$SL _ {ij}$ を陸面のグリッドの面積、$SO _ {ij}$ を海面グリッドの面積、$FLND^{atm}$, $FLND^{land} _ {ij}$, $FLND^{oc} _ {ij}$ をそれぞれのグリッドに陸面の占める割合とすると次式を満たす。

$$ SA*FLND^{atm} = \sum _ {j=1}^{jldiv}\sum _ {i=1}^{ildiv}(SL _ {ij}*FLND^{land} _ {ij}) = \sum _ {j=1}^{jodiv}\sum _ {i=1}^{iodiv}(SO _ {ij}*FLND^{oc } _{ij}) $$

ここで、(ildiv,jldiv)は陸面グリッドの東西・南北分割個数、(iodiv,jodiv)は海面グリッドの東西・南北方向の分割個数である。陸面グリッドにおいて、少しでも陸が存在すると定義された場合、陸面被覆などの境界値が必要となる。
